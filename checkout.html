<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="description" content="" />
	<title>Check Out | Luxury Travel Site</title>
	<link rel="stylesheet" href="./css/style.css" type="text/css" />
	<link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css" type="text/css" />
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400' rel='stylesheet' type='text/css'>
</head>

<body>
    <!-- Google Tag Manager -->
      <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MKTMQV"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MKTMQV');</script>
    <!-- End Google Tag Manager -->
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="brand" href="./">Luxury Travel Site</a>
				<ul class="nav">
					<li><a href="./">Home</a></li>
					<li><a href="./destinations.html">Destinations</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="container" id="main">
		<div class="title">
			<h1>Luxury Travel Site</h1>
		</div>
		<p class="lead">The most luxurious way to travel the world.</p>
		
		<div class="container" id="content">
			<div class="page-header"><h1>Checkout <small>Can you feel the sun yet?</small></h1></div>
			<table class="table table-striped">
				<thead><tr>
					<th>Description</th>
					<th>Length</th>
					<th>Price Per Person</th>
					<th>Travellers</th>
				</tr></thead>
				<tbody>
					<tr>
						<td>A week-long stay in one of the most luxurious places ever.</td>
						<td>6 nights</td>
						<td>$799</td>
						<td>
							<select style="width:60px;" id="travellers">
								<option>1</option>
								<option>2</option>
								<option>3</option>
								<option>4</option>
								<option>5</option>
							</select>
						</td>
					</tr>
				</tbody>
			</table>
			<div>
				<strong>Terms and Conditions</strong>
				Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce risus nulla, convallis non aliquet at, scelerisque ut sem. Quisque felis mauris, auctor sit amet elementum at, gravida ut orci. Phasellus condimentum condimentum enim eu consequat. Suspendisse accumsan purus dolor.
			</div>
				
			<div style="text-align:right;">
				<h2>$<span id="price">799</span></h2>
				<h4>Total</h4>
			</div>
			<div class="text-center"><a href="./thankyou.html?price=799" class="btn btn-primary" id="submitButton"><h3>Submit Reservation</h3></a></div>
		</div>
    <footer class="footer">
			<p class="pull-right"><a href="#">Back to top</a></p>
			<p>This is a demo site designed to showcase GTM.</p>
		</footer>
	</div>
	
	
	<script src="./js/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="./bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript">
      $('#submitButton').attr('href',"./thankyou.html?price=799" + "&destination=" + window.location.hash.substring(1) + "&travellers=1");
		$('#travellers').on('change', function() {
			var pocet = $(this).val();
	        var totalCost = 799 * pocet;
			$('#price').html(totalCost);
			$('#submitButton').attr('href',"./thankyou.html?price=" + totalCost + "&destination=" + window.location.hash.substring(1) + "&travellers=" + pocet);
			if (totalCost > 1000)
				fireTags();
		});
		function fireTags() {
			console.log('fire tags');
		}
//      $('#submitButton').on('click', function(event) {
// 		var pocet = $(this).val();
//         var totalCost = 799 * pocet;
//         var destination;
//         switch(window.location.hash){
//           case "#switzerland":
//             destination = "Switzerland";
//             break;
//           case "#puertorico":
//             destination = "Puerto Ricco";
//             break;
//           case "#providence":
//             destination = "Providence";
//             break;
//           case "#sanfrancisco":
//             destination = "San Francisco";
//             break;
//           case "":
//             destination = "Undefined";
//             break;         
//         }
//         dataLayer.push({'travellers': pocet, 'totalCost': totalCost, 'destination': destination}, 'event': 'reserved')
//       event.preventDefault();
//       var pocet = $('#travellers').val();
//       ga('require', 'ecommerce');
//       var ecomID = Math.floor((Math.random() * 1000000) + 1);
//       ga('ecommerce:addTransaction',{
//         'id': ecomID,
//         'affiliation': 'Karlova Luxury Travel Site' 
//       });
//       ga('ecommerce:addItem', {
//         'id': ecomID,
//         'name': location,
//         'category': 'destination',
//         'price': '799',
//         'quantity': pocet
//       });
//      ga('send', 'event', 'Reservation', 'Submit', location, {
//      'hitCallback': function() {
//         document.location = $(event.currentTarget).attr("href")+"&destination="+window.location.hash.substring(1)+"&travellers="+pocet;
//       }});
//      
//    });
	</script>
</body>
</html>